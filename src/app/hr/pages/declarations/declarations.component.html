<!-- ---------------------------------Year month ------------------------------------------- -->
<div class="wrapper">
  <div class="btn-add-employee">
    <h1>Incoming Declarations</h1>
    <!-- <button
        (click)="contractTypeDialog($event, 'add', undefined)"
        matTooltip="Add Contract Type"
      >
        <span> Add Contract Type</span>
      </button> -->
  </div>
  <div class="incoming-list">
    <!-- <mat-form-field appearance="standard">
      <mat-label>Filter</mat-label>
      <input
        matInput
        [(ngModel)]="filterVal"
        (ngModelChange)="searchNotifier.next()"
        placeholder="Ex. ium"
        #input
      />
    </mat-form-field> -->
    <table mat-table [dataSource]="incomingDeclarations">
      <ng-container matColumnDef="user">
        <th mat-header-cell *matHeaderCellDef>User</th>
        <td mat-cell *matCellDef="let element">{{ element.user.userRef }}</td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">
          {{ element.user.profile.fullname }}
        </td>
      </ng-container>

      <ng-container matColumnDef="month">
        <th mat-header-cell *matHeaderCellDef>Month</th>
        <td mat-cell *matCellDef="let element">{{ element.month }}</td>
      </ng-container>
      !--
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">
          {{ element.status }}
        </td>
      </ng-container>
      -->
      <ng-container matColumnDef="ACTION">
        <th class="px-3" mat-header-cell *matHeaderCellDef>Actions</th>
        <td class="px-3" mat-cell *matCellDef="let element; let i = index">
          <button
            mat-icon-button
            class="hr-button btn-approve"
            (click)="updateStatus(element, 'approved')"
            [disabled]="element.status === 'approved'"
          >
            Approve
          </button>
          <button
            mat-icon-button
            class="hr-button btn-decline"
            (click)="updateStatus(element, 'rejected')"
            [disabled]="element.status === 'rejected'"
          >
            Decline
          </button>
        </td>
      </ng-container>

      <tr
        mat-header-row
        *matHeaderRowDef="timesheetDeclarationsdisplayedColumns"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: timesheetDeclarationsdisplayedColumns"
      ></tr>
    </table>
    <mat-paginator
      #paginator
      [length]="total"
      [pageIndex]="p"
      [pageSize]="limit"
      [pageSizeOptions]="[7, 14, 21, 28, 42]"
      showFirstLastButtons
      (page)="changePage($event)"
      aria-label="Select page of periodic elements"
    >
    </mat-paginator>
  </div>
  <div class="row-wrapper" style="margin-top: 1rem">
    <div class="declarations-list">
      <h1>Timesheet Declarations History</h1>
      <mat-form-field appearance="standard">
        <mat-label>Filter</mat-label>
        <input
          matInput
          [(ngModel)]="filterVal"
          (ngModelChange)="searchNotifier.next()"
          placeholder="Ex. ium"
          #input
        />
      </mat-form-field>
      <table mat-table [dataSource]="timesheetDeclarations">
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let element">{{ element.user.userRef }}</td>
        </ng-container>
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">
            {{ element.user.profile.fullname }}
          </td>
        </ng-container>

        <ng-container matColumnDef="month">
          <th mat-header-cell *matHeaderCellDef>Month</th>
          <td mat-cell *matCellDef="let element">{{ element.month }}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element">
            {{ element.status }}
          </td>
        </ng-container>

        <ng-container matColumnDef="ACTION">
          <th class="px-3" mat-header-cell *matHeaderCellDef>Actions</th>
          <td class="px-3" mat-cell *matCellDef="let element; let i = index">
            <button
              mat-icon-button
              class="btn btn-outline-danger"
              (click)="deleteDeclaration(element)"
              matTooltip="Delete Declaration"
            >
              <clr-icon shape="trash" style="color: red !important"></clr-icon>
            </button>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="timesheetDeclarationsdisplayedColumns"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: timesheetDeclarationsdisplayedColumns"
        ></tr>
      </table>
      <mat-paginator
        #paginator
        [length]="total"
        [pageIndex]="p"
        [pageSize]="limit"
        [pageSizeOptions]="[7, 14, 21, 28, 42]"
        showFirstLastButtons
        (page)="changePage($event)"
        aria-label="Select page of periodic elements"
      >
      </mat-paginator>
    </div>
    <!-- <div class="incoming">
      <h1>Incoming Decclarations for this Month</h1>
      <div class="declaration-item" *ngFor="let item of incomingDeclarations">
        <span class="owner">{{ item.user.userRef }}</span>
        <div>
          Month : <span>{{ item.month }}</span> <br />
          Worked Hours :
          <span>{{ item.hours?.workinghours || 66 }}</span>
          <br />
          Extra Hours :
          <span>{{ item.hours?.extraHours || 66 }}</span>
        </div>
        <div>
          <button
            mat-icon-button
            class="hr-button btn-approve"
            (click)="updateStatus(item, 'approved')"
            [disabled]="item.status === 'approved'"
          >
            Approve
           </button>
          <button
            mat-icon-button
            class="hr-button btn-decline"
            (click)="updateStatus(item, 'rejected')"
            [disabled]="item.status === 'rejected'"
          >
            Decline
           </button>
        </div>
      </div>
    </div> -->
  </div>
</div>
